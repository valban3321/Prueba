<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>¬øQuieres ser mi novia?</title>

<style>
    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        min-height: 100svh;
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
        padding: 16px;
        overflow-x: hidden;
    }

    .card {
        background: white;
        padding: 22px;
        border-radius: 20px;
        text-align: center;
        width: 100%;
        max-width: 380px;
        box-shadow: 0 12px 30px rgba(0,0,0,0.25);
    }

    h1 {
        font-size: 26px;
        margin-bottom: 8px;
    }

    h2 {
        font-size: clamp(20px, 5vw, 24px);
        margin: 10px 0;
    }

    p {
        font-size: clamp(14px, 4vw, 16px);
        line-height: 1.45;
    }

    .buttons {
        margin-top: 20px;
        display: flex;
        gap: 12px;
        position: relative;
        height: 70px;
    }

    button {
        flex: 1;
        padding: 14px;
        font-size: 16px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    #yesBtn {
        background: #38b000;
        color: white;
    }

    #noBtn {
        background: #e63946;
        color: white;
        position: absolute;
        right: 0;
        bottom: 0;
    }

    .message {
        margin-top: 14px;
        font-style: italic;
        color: #555;
        min-height: 22px;
    }

    /* Easter Egg Tree */
    #loveTree {
        display: none;
        margin-top: 20px;
    }

    canvas {
        margin: 10px auto;
        display: block;
    }

    /* Galaxy */
    #galaxy {
        display: none;
        position: fixed;
        inset: 0;
        background: black;
        z-index: 999;
    }

    #closeGalaxy {
        position: fixed;
        top: 16px;
        right: 16px;
        z-index: 1000;
        background: rgba(255,255,255,0.15);
        color: white;
        border: 1px solid white;
        padding: 8px 12px;
        border-radius: 10px;
        cursor: pointer;
    }
</style>
</head>

<body>

<div class="card" id="mainCard">
    <h1 id="heart">üíñ</h1>

    <p>
        Este libro guarda una historia,  
        pero yo quiero escribir una contigo.
    </p>

    <h2>¬øQuieres ser mi novia?</h2>

    <div class="buttons">
        <button id="yesBtn" onclick="sayYes()">S√≠ üíï</button>
        <button id="noBtn" onclick="sayNo()">No üòÖ</button>
    </div>

    <div class="message" id="message"></div>

    <!-- Easter Egg √Årbol -->
    <div id="loveTree">
        <h2>üå±üíñ</h2>
        <p id="daysCount"></p>
        <canvas id="treeCanvas" width="300" height="300"></canvas>
        <p>
            As√≠ como este √°rbol,  
            lo que siento por ti ha crecido cada d√≠a.
        </p>
    </div>
</div>

<!-- Galaxia -->
<div id="galaxy">
    <button id="closeGalaxy" onclick="closeGalaxy()">Cerrar ‚ú®</button>
</div>

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

<script>
let noCount = 0;
let heartPressTimer = null;

/* BOT√ìN NO */
function sayNo() {
    noCount++;
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const message = document.getElementById("message");

    yesBtn.style.transform = `scale(${1 + noCount * 0.15})`;

    const x = Math.random() * 120;
    const y = Math.random() * 30;
    noBtn.style.transform = `translate(${x}px, ${y}px)`;

    const msgs = [
        "¬øSegura? üòå",
        "El s√≠ se ve bonito üëÄ",
        "Creo que ese bot√≥n miente ü§î",
        "Yo esperar√≠a un poquito m√°s üíï",
        "Mira el otro bot√≥n üòè"
    ];
    message.textContent = msgs[noCount % msgs.length];
}

/* BOT√ìN S√ç */
function sayYes() {
    document.getElementById("mainCard").innerHTML = `
        <h1>üíñ‚ú®</h1>
        <h2>Sab√≠a que dir√≠as que s√≠</h2>
        <p>
            Prometo cuidarte, escucharte  
            y hacerte sonre√≠r incluso en los d√≠as dif√≠ciles.
        </p>
        <p><strong>Gracias por elegir esta historia conmigo.</strong></p>
        <p style="margin-top:10px; font-size:14px;">
            (Toca el coraz√≥n üíñ)
        </p>
    `;

    setupHeartEasterEgg();
}

/* EASTER EGG 1: √Årbol */
function setupHeartEasterEgg() {
    const heart = document.getElementById("heart") || document.querySelector("h1");
    heart.addEventListener("touchstart", startPress);
    heart.addEventListener("mousedown", startPress);
    heart.addEventListener("touchend", cancelPress);
    heart.addEventListener("mouseup", cancelPress);
}

function startPress() {
    heartPressTimer = setTimeout(showLoveTree, 1200);
}

function cancelPress() {
    clearTimeout(heartPressTimer);
}

function showLoveTree() {
    const tree = document.getElementById("loveTree");
    if (!tree) return;

    tree.style.display = "block";

    const startDate = new Date("2025-01-15"); // ‚¨ÖÔ∏è CAMBIA ESTA FECHA
    const today = new Date();
    const days = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));

    document.getElementById("daysCount").textContent =
        `Han pasado ${days} d√≠as desde que comenzamos a salir üíï`;

    drawTree();

    setTimeout(showGalaxy, 2500);
}

function drawTree() {
    const canvas = document.getElementById("treeCanvas");
    const ctx = canvas.getContext("2d");
    let hearts = 0;

    const interval = setInterval(() => {
        hearts++;
        ctx.fillStyle = "#e63946";
        ctx.beginPath();
        ctx.arc(
            150 + Math.random() * 80 - 40,
            280 - hearts * 8,
            6,
            0,
            Math.PI * 2
        );
        ctx.fill();

        if (hearts > 28) clearInterval(interval);
    }, 140);
}

/* EASTER EGG 2: GALAXIA */
let renderer, scene, camera, galaxyObj;

function showGalaxy() {
    const container = document.getElementById("galaxy");
    container.style.display = "block";

    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, innerWidth / innerHeight, 0.1, 1000);
    camera.position.z = 60;

    renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(innerWidth, innerHeight);
    container.appendChild(renderer.domElement);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    const geometry = new THREE.BufferGeometry();
    const vertices = [];

    for (let i = 0; i < 2500; i++) {
        vertices.push(
            (Math.random() - 0.5) * 400,
            (Math.random() - 0.5) * 400,
            (Math.random() - 0.5) * 400
        );
    }

    geometry.setAttribute("position", new THREE.Float32BufferAttribute(vertices, 3));
    const material = new THREE.PointsMaterial({ color: 0xffffff, size: 1.2 });
    galaxyObj = new THREE.Points(geometry, material);
    scene.add(galaxyObj);

    animate();
}

function animate() {
    requestAnimationFrame(animate);
    if (galaxyObj) galaxyObj.rotation.y += 0.0008;
    renderer.render(scene, camera);
}

function closeGalaxy() {
    document.getElementById("galaxy").style.display = "none";
    if (renderer) renderer.dispose();
}
</script>

</body>
</html>
