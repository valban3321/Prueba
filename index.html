<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>¬øQuieres ser mi novia?</title>

<style>
body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    min-height: 100svh;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    padding: 16px;
}

.card {
    background: white;
    padding: 22px;
    border-radius: 20px;
    text-align: center;
    width: 100%;
    max-width: 380px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.25);
}

h2 {
    font-size: clamp(20px, 5vw, 24px);
}

p {
    font-size: clamp(14px, 4vw, 16px);
    line-height: 1.45;
}

/* BOTONES */
.buttons {
    margin-top: 20px;
    display: flex;
    gap: 12px;
}

button {
    flex: 1;
    padding: 14px;
    font-size: 16px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

#yesBtn {
    background: #38b000;
    color: white;
}

#noBtn {
    background: #e63946;
    color: white;
}

.message {
    margin-top: 14px;
    font-style: italic;
    color: #555;
    min-height: 22px;
}

/* CORAZ√ìN */
#heartBtn {
    font-size: 48px;
    background: none;
    border: none;
    cursor: pointer;
    margin-top: 10px;
}

/* √ÅRBOL */
#loveTree {
    display: none;
    margin-top: 20px;
}

canvas {
    display: block;
    margin: 10px auto;
}

/* GALAXIA */
#galaxy {
    display: none;
    position: fixed;
    inset: 0;
    background: black;
    z-index: 999;
}

#closeGalaxy {
    position: fixed;
    top: 16px;
    right: 16px;
    background: rgba(255,255,255,0.15);
    color: white;
    border: 1px solid white;
    padding: 8px 12px;
    border-radius: 10px;
}
</style>
</head>

<body>

<div class="card" id="card">
    <p>
        Este libro guarda una historia,  
        pero yo quiero escribir una contigo.
    </p>

    <h2>¬øQuieres ser mi novia?</h2>

    <div class="buttons">
        <button id="yesBtn" onclick="sayYes()">S√≠ üíï</button>
        <button id="noBtn" onclick="sayNo()">No üòÖ</button>
    </div>

    <div class="message" id="message"></div>

    <div id="loveTree">
        <h2>üå±üíñ</h2>
        <p id="daysCount"></p>
        <canvas id="treeCanvas" width="300" height="300"></canvas>
        <p>
            Desde que comenzamos a salir,  
            mi cari√±o por ti no ha dejado de crecer.
        </p>
    </div>
</div>

<div id="galaxy">
    <button id="closeGalaxy" onclick="closeGalaxy()">Cerrar ‚ú®</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

<script>
let noCount = 0;

/* BOT√ìN NO */
function sayNo() {
    noCount++;
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const msg = document.getElementById("message");

    yesBtn.style.transform = `scale(${1 + noCount * 0.15})`;
    noBtn.style.transform = `translate(${Math.random()*20}px, ${Math.random()*20}px)`;

    const msgs = [
        "¬øSegura? üòå",
        "Ese no parece correcto ü§î",
        "El s√≠ se ve bonito üëÄ",
        "Intenta otra vez üíï"
    ];
    msg.textContent = msgs[noCount % msgs.length];
}

/* BOT√ìN S√ç */
function sayYes() {
    document.getElementById("card").innerHTML = `
        <h2>üíñ Sab√≠a que dir√≠as que s√≠</h2>
        <p>
            Prometo cuidarte, escucharte  
            y hacerte sonre√≠r cada d√≠a.
        </p>
        <p><strong>Toca el coraz√≥n</strong></p>
        <button id="heartBtn" onclick="showLoveTree()">üíñ</button>

        <div id="loveTree">
            <p id="daysCount"></p>
            <canvas id="treeCanvas" width="300" height="300"></canvas>
            <p>
                Lo nuestro crece,  
                igual que este √°rbol.
            </p>
        </div>
    `;
}

/* √ÅRBOL */
function showLoveTree() {
    const tree = document.getElementById("loveTree");
    tree.style.display = "block";

    const startDate = new Date("2025-01-15"); // CAMBIA LA FECHA
    const today = new Date();
    const days = Math.floor((today - startDate) / (1000*60*60*24));

    document.getElementById("daysCount").textContent =
        `Han pasado ${days} d√≠as desde que comenzamos a salir üíï`;

    drawTree();
    setTimeout(showGalaxy, 2000);
}

function drawTree() {
    const ctx = document.getElementById("treeCanvas").getContext("2d");
    let i = 0;
    const interval = setInterval(() => {
        ctx.fillStyle = "#e63946";
        ctx.beginPath();
        ctx.arc(150 + Math.random()*60 - 30, 280 - i*8, 6, 0, Math.PI*2);
        ctx.fill();
        i++;
        if (i > 25) clearInterval(interval);
    }, 120);
}

/* GALAXIA */
let scene, camera, renderer, galaxy;

function showGalaxy() {
    const container = document.getElementById("galaxy");
    container.style.display = "block";

    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, innerWidth/innerHeight, 0.1, 1000);
    camera.position.z = 60;

    renderer = new THREE.WebGLRenderer({ antialias:true });
    renderer.setSize(innerWidth, innerHeight);
    container.appendChild(renderer.domElement);

    const controls = new THREE.OrbitControls(camera, renderer.domElement);

    const geo = new THREE.BufferGeometry();
    const pts = [];
    for (let i=0;i<2000;i++){
        pts.push((Math.random()-0.5)*400,(Math.random()-0.5)*400,(Math.random()-0.5)*400);
    }
    geo.setAttribute("position", new THREE.Float32BufferAttribute(pts,3));

    galaxy = new THREE.Points(geo, new THREE.PointsMaterial({ color:0xffffff }));
    scene.add(galaxy);

    animate();
}

function animate() {
    requestAnimationFrame(animate);
    if (galaxy) galaxy.rotation.y += 0.0008;
    renderer.render(scene,camera);
}

function closeGalaxy(){
    document.getElementById("galaxy").style.display="none";
}
</script>

</body>
</html>

